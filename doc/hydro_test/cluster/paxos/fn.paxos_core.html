<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Implements the core Paxos algorithm, which uses a cluster of propsers and acceptors to sequence payloads being sent to the proposers."><title>paxos_core in hydro_test::cluster::paxos - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-fecee23daa4e8a6d.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="hydro_test" data-themes="" data-resource-suffix="" data-rustdoc-version="1.83.0-nightly (4ac7bcbaa 2024-09-04)" data-channel="nightly" data-search-js="search-a99f1315e7cc5121.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-921df33f47b8780c.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-3b12f09e550e0385.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../hydro_test/index.html">hydro_<wbr>test</a><span class="version">0.0.0</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In hydro_<wbr>test::<wbr>cluster::<wbr>paxos</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../../index.html">hydro_test</a>::<wbr><a href="../index.html">cluster</a>::<wbr><a href="index.html">paxos</a>::<wbr><a class="fn" href="#">paxos_core</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../src/hydro_test/cluster/paxos.rs.html#72-166">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe fn paxos_core&lt;'a, P: <a class="trait" href="trait.PaxosPayload.html" title="trait hydro_test::cluster::paxos::PaxosPayload">PaxosPayload</a>, R&gt;(
    proposers: &amp;Cluster&lt;'a, <a class="struct" href="struct.Proposer.html" title="struct hydro_test::cluster::paxos::Proposer">Proposer</a>&gt;,
    acceptors: &amp;Cluster&lt;'a, <a class="struct" href="struct.Acceptor.html" title="struct hydro_test::cluster::paxos::Acceptor">Acceptor</a>&gt;,
    r_to_acceptors_checkpoint: Stream&lt;(ClusterId&lt;R&gt;, <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>), Cluster&lt;'a, <a class="struct" href="struct.Acceptor.html" title="struct hydro_test::cluster::paxos::Acceptor">Acceptor</a>&gt;, Unbounded, NoOrder&gt;,
    c_to_proposers: Stream&lt;P, Cluster&lt;'a, <a class="struct" href="struct.Proposer.html" title="struct hydro_test::cluster::paxos::Proposer">Proposer</a>&gt;, Unbounded&gt;,
    f: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
    i_am_leader_send_timeout: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>,
    i_am_leader_check_timeout: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>,
    i_am_leader_check_timeout_delay_multiplier: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>,
) -&gt; (Stream&lt;<a class="struct" href="struct.Ballot.html" title="struct hydro_test::cluster::paxos::Ballot">Ballot</a>, Cluster&lt;'a, <a class="struct" href="struct.Proposer.html" title="struct hydro_test::cluster::paxos::Proposer">Proposer</a>&gt;, Unbounded&gt;, Stream&lt;(<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;P&gt;), Cluster&lt;'a, <a class="struct" href="struct.Proposer.html" title="struct hydro_test::cluster::paxos::Proposer">Proposer</a>&gt;, Unbounded, NoOrder&gt;)</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Implements the core Paxos algorithm, which uses a cluster of propsers and acceptors
to sequence payloads being sent to the proposers.</p>
<p>Proposers that currently are the leader will work with acceptors to sequence incoming
payloads, but may drop payloads if they are not the lader or lose leadership during
the commit process.</p>
<p>Returns a stream of ballots, where new values are emitted when a new leader is elected,
and a stream of sequenced payloads with an index and optional payload (in the case of
holes in the log).</p>
<h2 id="safety"><a class="doc-anchor" href="#safety">§</a>Safety</h2>
<p>When the leader is stable, the algorithm will commit incoming payloads to the leader
in deterministic order. However, when the leader is changing, payloads may be
non-deterministically dropped. The stream of ballots is also non-deterministic because
leaders are elected in a non-deterministic process.</p>
</div></details></section></div></main></body></html>